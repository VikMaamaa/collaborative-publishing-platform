{"numFailedTestSuites":2,"numFailedTests":16,"numPassedTestSuites":14,"numPassedTests":150,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":16,"numTotalTests":166,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1751366776567,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Owner-only endpoints"],"duration":2072,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:199:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Owner-only endpoints should allow owner access to owner-only endpoint","invocations":1,"location":{"column":7,"line":195},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366782182,"status":"failed","title":"should allow owner access to owner-only endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Owner-only endpoints"],"duration":1950,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:210:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Owner-only endpoints should deny editor access to owner-only endpoint","invocations":1,"location":{"column":7,"line":206},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366784257,"status":"failed","title":"should deny editor access to owner-only endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Owner-only endpoints"],"duration":1974,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:217:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Owner-only endpoints should deny writer access to owner-only endpoint","invocations":1,"location":{"column":7,"line":213},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366786208,"status":"failed","title":"should deny writer access to owner-only endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Owner-only endpoints"],"duration":1931,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:224:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Owner-only endpoints should deny outsider access to owner-only endpoint","invocations":1,"location":{"column":7,"line":220},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366788183,"status":"failed","title":"should deny outsider access to owner-only endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Editor or Owner endpoints"],"duration":1953,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:233:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Editor or Owner endpoints should allow owner access to editor-or-owner endpoint","invocations":1,"location":{"column":7,"line":229},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366790115,"status":"failed","title":"should allow owner access to editor-or-owner endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Editor or Owner endpoints"],"duration":2069,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:243:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Editor or Owner endpoints should allow editor access to editor-or-owner endpoint","invocations":1,"location":{"column":7,"line":239},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366792069,"status":"failed","title":"should allow editor access to editor-or-owner endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Editor or Owner endpoints"],"duration":1990,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:253:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Editor or Owner endpoints should deny writer access to editor-or-owner endpoint","invocations":1,"location":{"column":7,"line":249},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366794139,"status":"failed","title":"should deny writer access to editor-or-owner endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Editor or Owner endpoints"],"duration":1984,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:260:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Editor or Owner endpoints should deny outsider access to editor-or-owner endpoint","invocations":1,"location":{"column":7,"line":256},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366796130,"status":"failed","title":"should deny outsider access to editor-or-owner endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Writer action endpoints"],"duration":1958,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:270:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Writer action endpoints should allow owner access to writer action endpoint","invocations":1,"location":{"column":7,"line":265},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366798115,"status":"failed","title":"should allow owner access to writer action endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Writer action endpoints"],"duration":1951,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:282:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Writer action endpoints should allow editor access to writer action endpoint","invocations":1,"location":{"column":7,"line":277},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366800074,"status":"failed","title":"should allow editor access to writer action endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Writer action endpoints"],"duration":1930,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 403 \"Forbidden\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:293:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Writer action endpoints should allow writer access to writer action endpoint","invocations":1,"location":{"column":7,"line":288},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366802026,"status":"failed","title":"should allow writer access to writer action endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Writer action endpoints"],"duration":1932,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Integration Tests RBAC with Organization Roles Writer action endpoints should deny outsider access to writer action endpoint","invocations":1,"location":{"column":7,"line":299},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366803957,"status":"passed","title":"should deny outsider access to writer action endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Public endpoints"],"duration":1963,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:313:12)\n    at Promise.finally.completed (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at _runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/vikky/worky/Enbros/tat2/backend/node_modules/jest-runner/build/index.js:340:7)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Public endpoints should allow any authenticated user access to public endpoint","invocations":1,"location":{"column":7,"line":309},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366805890,"status":"failed","title":"should allow any authenticated user access to public endpoint"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Authentication requirements"],"duration":1936,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Integration Tests RBAC with Organization Roles Authentication requirements should require authentication for all endpoints","invocations":1,"location":{"column":7,"line":321},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366807854,"status":"passed","title":"should require authentication for all endpoints"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Authentication requirements"],"duration":1921,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Integration Tests RBAC with Organization Roles Authentication requirements should require valid JWT token","invocations":1,"location":{"column":7,"line":327},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366809791,"status":"passed","title":"should require valid JWT token"},{"ancestorTitles":["RBAC Integration Tests","RBAC with Organization Roles","Organization membership requirements"],"duration":1934,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts:347:12)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n----\n    at Test._assertStatus (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:267:14)\n    at /home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:323:13\n    at Test._assertFunction (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:300:13)\n    at Test.assert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:179:23)\n    at Server.localAssert (/home/vikky/worky/Enbros/tat2/backend/node_modules/supertest/lib/test.js:135:14)\n    at Object.onceWrapper (node:events:638:28)\n    at Server.emit (node:events:524:28)\n    at emitCloseNT (node:net:2344:8)\n    at processTicksAndRejections (node:internal/process/task_queues:81:21)"],"fullName":"RBAC Integration Tests RBAC with Organization Roles Organization membership requirements should deny access when user is not a member of the organization","invocations":1,"location":{"column":7,"line":336},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366811713,"status":"failed","title":"should deny access when user is not a member of the organization"}],"endTime":1751366813731,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Owner-only endpoints › should allow owner access to owner-only endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 197 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/owner-only`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${ownerToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 199 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Owner access granted'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(ownerUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:199:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Owner-only endpoints › should deny editor access to owner-only endpoint\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 208 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/owner-only`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${editorToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 210 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 212 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 213 |\u001b[39m       it(\u001b[32m'should deny writer access to owner-only endpoint'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:210:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Owner-only endpoints › should deny writer access to owner-only endpoint\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 215 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/owner-only`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 216 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${writerToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 217 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m       it(\u001b[32m'should deny outsider access to owner-only endpoint'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:217:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Owner-only endpoints › should deny outsider access to owner-only endpoint\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 222 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/owner-only`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 223 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${outsiderToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 224 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 225 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 226 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 227 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:224:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Editor or Owner endpoints › should allow owner access to editor-or-owner endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 231 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/editor-or-owner`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 232 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${ownerToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 233 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 234 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 235 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Editor or owner access granted'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 236 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(ownerUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:233:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Editor or Owner endpoints › should allow editor access to editor-or-owner endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 241 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/editor-or-owner`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 242 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${editorToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 243 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 244 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 245 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Editor or owner access granted'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 246 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(editorUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:243:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Editor or Owner endpoints › should deny writer access to editor-or-owner endpoint\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 251 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/editor-or-owner`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 252 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${writerToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 253 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 254 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 255 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 256 |\u001b[39m       it(\u001b[32m'should deny outsider access to editor-or-owner endpoint'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:253:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Editor or Owner endpoints › should deny outsider access to editor-or-owner endpoint\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 258 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/editor-or-owner`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 259 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${outsiderToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 260 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 262 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 263 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:260:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Writer action endpoints › should allow owner access to writer action endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 403 \"Forbidden\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 268 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${ownerToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 269 |\u001b[39m           \u001b[33m.\u001b[39msend({ action\u001b[33m:\u001b[39m \u001b[32m'test'\u001b[39m })\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 270 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 271 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 272 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Writer action completed'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 273 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(ownerUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:270:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Writer action endpoints › should allow editor access to writer action endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 403 \"Forbidden\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 280 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${editorToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 281 |\u001b[39m           \u001b[33m.\u001b[39msend({ action\u001b[33m:\u001b[39m \u001b[32m'test'\u001b[39m })\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 282 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 283 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 284 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Writer action completed'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(editorUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:282:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Writer action endpoints › should allow writer access to writer action endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 403 \"Forbidden\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 291 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${writerToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 292 |\u001b[39m           \u001b[33m.\u001b[39msend({ action\u001b[33m:\u001b[39m \u001b[32m'test'\u001b[39m })\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 293 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 294 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 295 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Writer action completed'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 296 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(writerUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:293:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Public endpoints › should allow any authenticated user access to public endpoint\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 311 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${organization.id}/public`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 312 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${outsiderToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 313 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 315 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Public access granted'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 316 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muserId)\u001b[33m.\u001b[39mtoBe(outsiderUser\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:313:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRBAC Integration Tests › RBAC with Organization Roles › Organization membership requirements › should deny access when user is not a member of the organization\u001b[39m\u001b[22m\n\n    expected 403 \"Forbidden\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 345 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`/api/test-rbac/${newOrg.id}/owner-only`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 346 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${ownerToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 347 |\u001b[39m           \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 348 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 349 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 350 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/rbac.e2e-spec.ts\u001b[39m\u001b[0m\u001b[2m:347:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:267:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:323:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:300:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:179:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.localAssert (\u001b[22m\u001b[2m../node_modules/supertest/lib/test.js\u001b[2m:135:14)\u001b[22m\u001b[2m\u001b[22m\n","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/rbac.e2e-spec.ts","startTime":1751366776891,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["AuthController (e2e)","/api/auth/register (POST)"],"duration":506,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/register (POST) should register a new user successfully","invocations":1,"location":{"column":5,"line":79},"numPassingAsserts":9,"retryReasons":[],"startAt":1751366814890,"status":"passed","title":"should register a new user successfully"},{"ancestorTitles":["AuthController (e2e)","/api/auth/register (POST)"],"duration":29,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/register (POST) should return 409 when email already exists","invocations":1,"location":{"column":5,"line":104},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366815399,"status":"passed","title":"should return 409 when email already exists"},{"ancestorTitles":["AuthController (e2e)","/api/auth/register (POST)"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/register (POST) should return 409 when username already exists","invocations":1,"location":{"column":5,"line":125},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366815430,"status":"passed","title":"should return 409 when username already exists"},{"ancestorTitles":["AuthController (e2e)","/api/auth/register (POST)"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/register (POST) should return 400 for invalid email format","invocations":1,"location":{"column":5,"line":146},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366815450,"status":"passed","title":"should return 400 for invalid email format"},{"ancestorTitles":["AuthController (e2e)","/api/auth/register (POST)"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/register (POST) should return 400 for short password","invocations":1,"location":{"column":5,"line":159},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366815462,"status":"passed","title":"should return 400 for short password"},{"ancestorTitles":["AuthController (e2e)","/api/auth/login (POST)"],"duration":761,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/login (POST) should login successfully with valid credentials","invocations":1,"location":{"column":5,"line":186},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366815472,"status":"passed","title":"should login successfully with valid credentials"},{"ancestorTitles":["AuthController (e2e)","/api/auth/login (POST)"],"duration":390,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/login (POST) should return 401 for invalid email","invocations":1,"location":{"column":5,"line":203},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366816234,"status":"passed","title":"should return 401 for invalid email"},{"ancestorTitles":["AuthController (e2e)","/api/auth/login (POST)"],"duration":768,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/login (POST) should return 401 for invalid password","invocations":1,"location":{"column":5,"line":215},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366816625,"status":"passed","title":"should return 401 for invalid password"},{"ancestorTitles":["AuthController (e2e)","/api/auth/profile (GET)"],"duration":776,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/profile (GET) should return user profile when authenticated","invocations":1,"location":{"column":5,"line":254},"numPassingAsserts":6,"retryReasons":[],"startAt":1751366817394,"status":"passed","title":"should return user profile when authenticated"},{"ancestorTitles":["AuthController (e2e)","/api/auth/profile (GET)"],"duration":779,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/profile (GET) should return 401 when no token provided","invocations":1,"location":{"column":5,"line":268},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366818171,"status":"passed","title":"should return 401 when no token provided"},{"ancestorTitles":["AuthController (e2e)","/api/auth/profile (GET)"],"duration":763,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthController (e2e) /api/auth/profile (GET) should return 401 when invalid token provided","invocations":1,"location":{"column":5,"line":274},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366818951,"status":"passed","title":"should return 401 when invalid token provided"}],"endTime":1751366819724,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/auth.e2e-spec.ts","startTime":1751366813793,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["UsersController (e2e)","/users (POST)"],"duration":546,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users (POST) should create a new user","invocations":1,"location":{"column":5,"line":70},"numPassingAsserts":8,"retryReasons":[],"startAt":1751366820677,"status":"passed","title":"should create a new user"},{"ancestorTitles":["UsersController (e2e)","/users (POST)"],"duration":492,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users (POST) should return 409 when email already exists","invocations":1,"location":{"column":5,"line":94},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366821225,"status":"passed","title":"should return 409 when email already exists"},{"ancestorTitles":["UsersController (e2e)","/users (POST)"],"duration":469,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users (POST) should return 409 when username already exists","invocations":1,"location":{"column":5,"line":120},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366821719,"status":"passed","title":"should return 409 when username already exists"},{"ancestorTitles":["UsersController (e2e)","/users (GET)"],"duration":873,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users (GET) should return all users","invocations":1,"location":{"column":5,"line":148},"numPassingAsserts":5,"retryReasons":[],"startAt":1751366822190,"status":"passed","title":"should return all users"},{"ancestorTitles":["UsersController (e2e)","/users/:id (GET)"],"duration":505,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (GET) should return a specific user","invocations":1,"location":{"column":5,"line":192},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366823064,"status":"passed","title":"should return a specific user"},{"ancestorTitles":["UsersController (e2e)","/users/:id (GET)"],"duration":90,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (GET) should return 404 for non-existent user","invocations":1,"location":{"column":5,"line":219},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366823570,"status":"passed","title":"should return 404 for non-existent user"},{"ancestorTitles":["UsersController (e2e)","/users/:id (PUT)"],"duration":486,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (PUT) should update a user","invocations":1,"location":{"column":5,"line":227},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366823661,"status":"passed","title":"should update a user"},{"ancestorTitles":["UsersController (e2e)","/users/:id (PUT)"],"duration":89,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (PUT) should return 404 for non-existent user","invocations":1,"location":{"column":5,"line":259},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366824148,"status":"passed","title":"should return 404 for non-existent user"},{"ancestorTitles":["UsersController (e2e)","/users/:id (DELETE)"],"duration":539,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (DELETE) should deactivate a user","invocations":1,"location":{"column":5,"line":272},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366824238,"status":"passed","title":"should deactivate a user"},{"ancestorTitles":["UsersController (e2e)","/users/:id (DELETE)"],"duration":91,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersController (e2e) /users/:id (DELETE) should return 404 for non-existent user","invocations":1,"location":{"column":5,"line":299},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366824778,"status":"passed","title":"should return 404 for non-existent user"}],"endTime":1751366824880,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/users/users.e2e-spec.ts","startTime":1751366819735,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["NotificationProcessor","handlePostPublished"],"duration":170,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostPublished should process post published notification successfully","invocations":1,"location":{"column":5,"line":30},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366825259,"status":"passed","title":"should process post published notification successfully"},{"ancestorTitles":["NotificationProcessor","handlePostPublished"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostPublished should handle errors during post published notification processing","invocations":1,"location":{"column":5,"line":62},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366825444,"status":"passed","title":"should handle errors during post published notification processing"},{"ancestorTitles":["NotificationProcessor","handlePostRejected"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostRejected should process post rejected notification successfully","invocations":1,"location":{"column":5,"line":95},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366825451,"status":"passed","title":"should process post rejected notification successfully"},{"ancestorTitles":["NotificationProcessor","handlePostRejected"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostRejected should handle errors during post rejected notification processing","invocations":1,"location":{"column":5,"line":127},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366825607,"status":"passed","title":"should handle errors during post rejected notification processing"},{"ancestorTitles":["NotificationProcessor","handlePostNeedsReview"],"duration":208,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostNeedsReview should process post needs review notification successfully","invocations":1,"location":{"column":5,"line":160},"numPassingAsserts":5,"retryReasons":[],"startAt":1751366825614,"status":"passed","title":"should process post needs review notification successfully"},{"ancestorTitles":["NotificationProcessor","handlePostNeedsReview"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor handlePostNeedsReview should handle errors during post needs review notification processing","invocations":1,"location":{"column":5,"line":195},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366825824,"status":"passed","title":"should handle errors during post needs review notification processing"},{"ancestorTitles":["NotificationProcessor","private notification methods"],"duration":105,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor private notification methods should simulate email notification correctly","invocations":1,"location":{"column":5,"line":228},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366825830,"status":"passed","title":"should simulate email notification correctly"},{"ancestorTitles":["NotificationProcessor","private notification methods"],"duration":55,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor private notification methods should simulate in-app notification correctly","invocations":1,"location":{"column":5,"line":240},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366825937,"status":"passed","title":"should simulate in-app notification correctly"},{"ancestorTitles":["NotificationProcessor","private notification methods"],"duration":158,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor private notification methods should handle post published notification with recipients","invocations":1,"location":{"column":5,"line":253},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366825994,"status":"passed","title":"should handle post published notification with recipients"},{"ancestorTitles":["NotificationProcessor","private notification methods"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor private notification methods should handle post rejected notification with rejection reason","invocations":1,"location":{"column":5,"line":271},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366826153,"status":"passed","title":"should handle post rejected notification with rejection reason"},{"ancestorTitles":["NotificationProcessor","private notification methods"],"duration":208,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationProcessor private notification methods should handle post needs review notification with multiple editors","invocations":1,"location":{"column":5,"line":289},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366826310,"status":"passed","title":"should handle post needs review notification with multiple editors"}],"endTime":1751366826525,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/queues/notification.processor.spec.ts","startTime":1751366824895,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["TransactionService","executeInTransaction"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeInTransaction should execute operation successfully within transaction","invocations":1,"location":{"column":5,"line":42},"numPassingAsserts":7,"retryReasons":[],"startAt":1751366826941,"status":"passed","title":"should execute operation successfully within transaction"},{"ancestorTitles":["TransactionService","executeInTransaction"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeInTransaction should rollback transaction on error","invocations":1,"location":{"column":5,"line":57},"numPassingAsserts":8,"retryReasons":[],"startAt":1751366826973,"status":"passed","title":"should rollback transaction on error"},{"ancestorTitles":["TransactionService","executeInTransaction"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeInTransaction should release query runner even if operation throws","invocations":1,"location":{"column":5,"line":72},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366826981,"status":"passed","title":"should release query runner even if operation throws"},{"ancestorTitles":["TransactionService","executeWithRetry"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeWithRetry should execute operation successfully on first attempt","invocations":1,"location":{"column":5,"line":87},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366826985,"status":"passed","title":"should execute operation successfully on first attempt"},{"ancestorTitles":["TransactionService","executeWithRetry"],"duration":206,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeWithRetry should retry on retryable errors and succeed","invocations":1,"location":{"column":5,"line":97},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366826989,"status":"passed","title":"should retry on retryable errors and succeed"},{"ancestorTitles":["TransactionService","executeWithRetry"],"duration":204,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeWithRetry should fail after max retries on retryable errors","invocations":1,"location":{"column":5,"line":109},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366827196,"status":"passed","title":"should fail after max retries on retryable errors"},{"ancestorTitles":["TransactionService","executeWithRetry"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeWithRetry should not retry on non-retryable errors","invocations":1,"location":{"column":5,"line":118},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366827401,"status":"passed","title":"should not retry on non-retryable errors"},{"ancestorTitles":["TransactionService","executeWithRetry"],"duration":204,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService executeWithRetry should use exponential backoff between retries","invocations":1,"location":{"column":5,"line":127},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827406,"status":"passed","title":"should use exponential backoff between retries"},{"ancestorTitles":["TransactionService","isRetryableError"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService isRetryableError should identify deadlock errors as retryable","invocations":1,"location":{"column":5,"line":143},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827611,"status":"passed","title":"should identify deadlock errors as retryable"},{"ancestorTitles":["TransactionService","isRetryableError"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService isRetryableError should identify serialization errors as retryable","invocations":1,"location":{"column":5,"line":148},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827616,"status":"passed","title":"should identify serialization errors as retryable"},{"ancestorTitles":["TransactionService","isRetryableError"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService isRetryableError should identify serialization failure errors as retryable","invocations":1,"location":{"column":5,"line":153},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827622,"status":"passed","title":"should identify serialization failure errors as retryable"},{"ancestorTitles":["TransactionService","isRetryableError"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService isRetryableError should not identify other errors as retryable","invocations":1,"location":{"column":5,"line":158},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827625,"status":"passed","title":"should not identify other errors as retryable"},{"ancestorTitles":["TransactionService","isRetryableError"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TransactionService isRetryableError should handle errors without message","invocations":1,"location":{"column":5,"line":163},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366827629,"status":"passed","title":"should handle errors without message"}],"endTime":1751366827637,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/common/services/transaction.service.spec.ts","startTime":1751366826543,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PostsService","createPost"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService createPost should create a post successfully","invocations":1,"location":{"column":5,"line":97},"numPassingAsserts":5,"retryReasons":[],"startAt":1751366828315,"status":"passed","title":"should create a post successfully"},{"ancestorTitles":["PostsService","createPost"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService createPost should throw ForbiddenException if user is not a member","invocations":1,"location":{"column":5,"line":156},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828359,"status":"passed","title":"should throw ForbiddenException if user is not a member"},{"ancestorTitles":["PostsService","findAllPosts"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findAllPosts should return all posts for editors and owners","invocations":1,"location":{"column":5,"line":174},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366828372,"status":"passed","title":"should return all posts for editors and owners"},{"ancestorTitles":["PostsService","findAllPosts"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findAllPosts should return only user posts for writers","invocations":1,"location":{"column":5,"line":228},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366828384,"status":"passed","title":"should return only user posts for writers"},{"ancestorTitles":["PostsService","findAllPosts"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findAllPosts should filter by status when provided","invocations":1,"location":{"column":5,"line":265},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828389,"status":"passed","title":"should filter by status when provided"},{"ancestorTitles":["PostsService","findPostById"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findPostById should return post if user has access","invocations":1,"location":{"column":5,"line":287},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828393,"status":"passed","title":"should return post if user has access"},{"ancestorTitles":["PostsService","findPostById"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findPostById should throw NotFoundException if post not found","invocations":1,"location":{"column":5,"line":321},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828397,"status":"passed","title":"should throw NotFoundException if post not found"},{"ancestorTitles":["PostsService","findPostById"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService findPostById should throw ForbiddenException if user is not a member","invocations":1,"location":{"column":5,"line":329},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828401,"status":"passed","title":"should throw ForbiddenException if user is not a member"},{"ancestorTitles":["PostsService","updatePost"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService updatePost should update post if user has permission","invocations":1,"location":{"column":5,"line":351},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366828405,"status":"passed","title":"should update post if user has permission"},{"ancestorTitles":["PostsService","updatePost"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService updatePost should throw ConflictException for published posts","invocations":1,"location":{"column":5,"line":402},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828410,"status":"passed","title":"should throw ConflictException for published posts"},{"ancestorTitles":["PostsService","submitForReview"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService submitForReview should submit draft post for review","invocations":1,"location":{"column":5,"line":455},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366828414,"status":"passed","title":"should submit draft post for review"},{"ancestorTitles":["PostsService","submitForReview"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService submitForReview should throw ConflictException for non-draft posts","invocations":1,"location":{"column":5,"line":507},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828419,"status":"passed","title":"should throw ConflictException for non-draft posts"},{"ancestorTitles":["PostsService","reviewPost"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService reviewPost should approve post if user has permission","invocations":1,"location":{"column":5,"line":554},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366828423,"status":"passed","title":"should approve post if user has permission"},{"ancestorTitles":["PostsService","reviewPost"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService reviewPost should reject post with reason","invocations":1,"location":{"column":5,"line":605},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366828428,"status":"passed","title":"should reject post with reason"},{"ancestorTitles":["PostsService","reviewPost"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService reviewPost should throw ConflictException if rejection reason is missing","invocations":1,"location":{"column":5,"line":662},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828431,"status":"passed","title":"should throw ConflictException if rejection reason is missing"},{"ancestorTitles":["PostsService","deletePost"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService deletePost should delete post if user has permission","invocations":1,"location":{"column":5,"line":718},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366828435,"status":"passed","title":"should delete post if user has permission"},{"ancestorTitles":["PostsService","deletePost"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService deletePost should throw ForbiddenException if user cannot delete","invocations":1,"location":{"column":5,"line":758},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366828439,"status":"passed","title":"should throw ForbiddenException if user cannot delete"},{"ancestorTitles":["PostsService","getPublicPosts"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PostsService getPublicPosts should return only public published posts","invocations":1,"location":{"column":5,"line":798},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366828443,"status":"passed","title":"should return only public published posts"}],"endTime":1751366828449,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/posts/posts.service.spec.ts","startTime":1751366827646,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should return true when no roles are required","invocations":1,"location":{"column":5,"line":76},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366828982,"status":"passed","title":"should return true when no roles are required"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should return true when user has required role","invocations":1,"location":{"column":5,"line":88},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829025,"status":"passed","title":"should return true when user has required role"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should return true when user has one of multiple required roles","invocations":1,"location":{"column":5,"line":99},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829033,"status":"passed","title":"should return true when user has one of multiple required roles"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should throw ForbiddenException when user is not specified","invocations":1,"location":{"column":5,"line":109},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829040,"status":"passed","title":"should throw ForbiddenException when user is not specified"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should throw ForbiddenException when organization is not specified","invocations":1,"location":{"column":5,"line":130},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829048,"status":"passed","title":"should throw ForbiddenException when organization is not specified"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should throw ForbiddenException for inactive organization","invocations":1,"location":{"column":5,"line":154},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829053,"status":"passed","title":"should throw ForbiddenException for inactive organization"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should throw ForbiddenException when user has insufficient role","invocations":1,"location":{"column":5,"line":176},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829059,"status":"passed","title":"should throw ForbiddenException when user has insufficient role"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should throw ForbiddenException when user has no role in organization","invocations":1,"location":{"column":5,"line":186},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829065,"status":"passed","title":"should throw ForbiddenException when user has no role in organization"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should extract orgId from request body","invocations":1,"location":{"column":5,"line":196},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829070,"status":"passed","title":"should extract orgId from request body"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should extract orgId from query parameters","invocations":1,"location":{"column":5,"line":220},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829076,"status":"passed","title":"should extract orgId from query parameters"},{"ancestorTitles":["OrganizationGuard","canActivate"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationGuard canActivate should prioritize params over body and query for orgId","invocations":1,"location":{"column":5,"line":244},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829082,"status":"passed","title":"should prioritize params over body and query for orgId"}],"endTime":1751366829096,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/guards/organization.guard.spec.ts","startTime":1751366828468,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OrganizationsService","createOrganization"],"duration":30,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService createOrganization should create an organization and add creator as owner","invocations":1,"location":{"column":5,"line":80},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366829729,"status":"passed","title":"should create an organization and add creator as owner"},{"ancestorTitles":["OrganizationsService","createOrganization"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService createOrganization should throw ConflictException if organization name already exists","invocations":1,"location":{"column":5,"line":128},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829805,"status":"passed","title":"should throw ConflictException if organization name already exists"},{"ancestorTitles":["OrganizationsService","findAllOrganizations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService findAllOrganizations should return organizations where user is a member","invocations":1,"location":{"column":5,"line":140},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366829818,"status":"passed","title":"should return organizations where user is a member"},{"ancestorTitles":["OrganizationsService","findOrganizationById"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService findOrganizationById should return organization if user is a member","invocations":1,"location":{"column":5,"line":174},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829825,"status":"passed","title":"should return organization if user is a member"},{"ancestorTitles":["OrganizationsService","findOrganizationById"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService findOrganizationById should throw NotFoundException if organization not found","invocations":1,"location":{"column":5,"line":202},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829831,"status":"passed","title":"should throw NotFoundException if organization not found"},{"ancestorTitles":["OrganizationsService","findOrganizationById"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService findOrganizationById should throw ForbiddenException if user is not a member","invocations":1,"location":{"column":5,"line":217},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829836,"status":"passed","title":"should throw ForbiddenException if user is not a member"},{"ancestorTitles":["OrganizationsService","updateOrganization"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService updateOrganization should update organization if user has editor permission","invocations":1,"location":{"column":5,"line":247},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829841,"status":"passed","title":"should update organization if user has editor permission"},{"ancestorTitles":["OrganizationsService","updateOrganization"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService updateOrganization should throw ForbiddenException if user lacks permission","invocations":1,"location":{"column":5,"line":276},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829849,"status":"passed","title":"should throw ForbiddenException if user lacks permission"},{"ancestorTitles":["OrganizationsService","inviteMember"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService inviteMember should invite member if user has editor permission","invocations":1,"location":{"column":5,"line":301},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829861,"status":"passed","title":"should invite member if user has editor permission"},{"ancestorTitles":["OrganizationsService","inviteMember"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService inviteMember should throw NotFoundException if user not found","invocations":1,"location":{"column":5,"line":341},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829871,"status":"passed","title":"should throw NotFoundException if user not found"},{"ancestorTitles":["OrganizationsService","inviteMember"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService inviteMember should throw ConflictException if user is already a member","invocations":1,"location":{"column":5,"line":358},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829878,"status":"passed","title":"should throw ConflictException if user is already a member"},{"ancestorTitles":["OrganizationsService","updateMemberRole"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService updateMemberRole should update member role if user has editor permission","invocations":1,"location":{"column":5,"line":397},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366829882,"status":"passed","title":"should update member role if user has editor permission"},{"ancestorTitles":["OrganizationsService","updateMemberRole"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService updateMemberRole should prevent changing owner role unless it is the owner themselves","invocations":1,"location":{"column":5,"line":426},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829886,"status":"passed","title":"should prevent changing owner role unless it is the owner themselves"},{"ancestorTitles":["OrganizationsService","removeMember"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService removeMember should remove member if user has editor permission","invocations":1,"location":{"column":5,"line":459},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829890,"status":"passed","title":"should remove member if user has editor permission"},{"ancestorTitles":["OrganizationsService","removeMember"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService removeMember should prevent removing owner unless it is themselves","invocations":1,"location":{"column":5,"line":489},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829895,"status":"passed","title":"should prevent removing owner unless it is themselves"},{"ancestorTitles":["OrganizationsService","leaveOrganization"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService leaveOrganization should allow user to leave organization","invocations":1,"location":{"column":5,"line":520},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829907,"status":"passed","title":"should allow user to leave organization"},{"ancestorTitles":["OrganizationsService","leaveOrganization"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService leaveOrganization should prevent leaving if user is the only owner","invocations":1,"location":{"column":5,"line":539},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829912,"status":"passed","title":"should prevent leaving if user is the only owner"},{"ancestorTitles":["OrganizationsService","leaveOrganization"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OrganizationsService leaveOrganization should throw NotFoundException if user is not a member","invocations":1,"location":{"column":5,"line":555},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366829916,"status":"passed","title":"should throw NotFoundException if user is not a member"}],"endTime":1751366829921,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/organizations/organizations.service.spec.ts","startTime":1751366829124,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AuthService","validateUser"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService validateUser should return user when credentials are valid","invocations":1,"location":{"column":5,"line":70},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366830466,"status":"passed","title":"should return user when credentials are valid"},{"ancestorTitles":["AuthService","validateUser"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService validateUser should return null when credentials are invalid","invocations":1,"location":{"column":5,"line":79},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366830493,"status":"passed","title":"should return null when credentials are invalid"},{"ancestorTitles":["AuthService","login"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService login should return access token and user data when user is provided","invocations":1,"location":{"column":5,"line":89},"numPassingAsserts":4,"retryReasons":[],"startAt":1751366830499,"status":"passed","title":"should return access token and user data when user is provided"},{"ancestorTitles":["AuthService","register"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService register should create user and return access token when registration is successful","invocations":1,"location":{"column":5,"line":134},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366830505,"status":"passed","title":"should create user and return access token when registration is successful"},{"ancestorTitles":["AuthService","register"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService register should throw ConflictException when user creation fails","invocations":1,"location":{"column":5,"line":146},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366830509,"status":"passed","title":"should throw ConflictException when user creation fails"},{"ancestorTitles":["AuthService","getProfile"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuthService getProfile should return user profile without sensitive data","invocations":1,"location":{"column":5,"line":155},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366830516,"status":"passed","title":"should return user profile without sensitive data"}],"endTime":1751366830521,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/auth.service.spec.ts","startTime":1751366829931,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["LocalStrategy","validate"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LocalStrategy validate should return user when credentials are valid","invocations":1,"location":{"column":5,"line":56},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366831043,"status":"passed","title":"should return user when credentials are valid"},{"ancestorTitles":["LocalStrategy","validate"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LocalStrategy validate should throw UnauthorizedException when credentials are invalid","invocations":1,"location":{"column":5,"line":65},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831069,"status":"passed","title":"should throw UnauthorizedException when credentials are invalid"}],"endTime":1751366831078,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/strategies/local.strategy.spec.ts","startTime":1751366830527,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["UsersService","create"],"duration":26,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService create should create a new user successfully","invocations":1,"location":{"column":5,"line":102},"numPassingAsserts":5,"retryReasons":[],"startAt":1751366831574,"status":"passed","title":"should create a new user successfully"},{"ancestorTitles":["UsersService","create"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService create should throw ConflictException when email already exists","invocations":1,"location":{"column":5,"line":166},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831615,"status":"passed","title":"should throw ConflictException when email already exists"},{"ancestorTitles":["UsersService","create"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService create should throw ConflictException when username already exists","invocations":1,"location":{"column":5,"line":175},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831628,"status":"passed","title":"should throw ConflictException when username already exists"},{"ancestorTitles":["UsersService","validateUser"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService validateUser should return user when credentials are valid","invocations":1,"location":{"column":5,"line":186},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366831633,"status":"passed","title":"should return user when credentials are valid"},{"ancestorTitles":["UsersService","validateUser"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService validateUser should return null when user not found","invocations":1,"location":{"column":5,"line":201},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831640,"status":"passed","title":"should return null when user not found"},{"ancestorTitles":["UsersService","validateUser"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService validateUser should return null when user is inactive","invocations":1,"location":{"column":5,"line":209},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831644,"status":"passed","title":"should return null when user is inactive"},{"ancestorTitles":["UsersService","validateUser"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService validateUser should return null when password is invalid","invocations":1,"location":{"column":5,"line":218},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831648,"status":"passed","title":"should return null when password is invalid"},{"ancestorTitles":["UsersService","getUserRoleInOrganization"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService getUserRoleInOrganization should return user role when member of organization","invocations":1,"location":{"column":5,"line":235},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366831652,"status":"passed","title":"should return user role when member of organization"},{"ancestorTitles":["UsersService","getUserRoleInOrganization"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService getUserRoleInOrganization should return null when user is not member of organization","invocations":1,"location":{"column":5,"line":251},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831657,"status":"passed","title":"should return null when user is not member of organization"},{"ancestorTitles":["UsersService","getUserRoleInOrganization"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"UsersService getUserRoleInOrganization should return null when membership is inactive","invocations":1,"location":{"column":5,"line":263},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366831662,"status":"passed","title":"should return null when membership is inactive"}],"endTime":1751366831668,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/users/users.service.spec.ts","startTime":1751366831090,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["NotificationQueue","addNotificationJob"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue addNotificationJob should add a notification job with default options","invocations":1,"location":{"column":5,"line":37},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832000,"status":"passed","title":"should add a notification job with default options"},{"ancestorTitles":["NotificationQueue","addNotificationJob"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue addNotificationJob should add a notification job with custom options","invocations":1,"location":{"column":5,"line":63},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832030,"status":"passed","title":"should add a notification job with custom options"},{"ancestorTitles":["NotificationQueue","addPostPublishedNotification"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue addPostPublishedNotification should add a post published notification job","invocations":1,"location":{"column":5,"line":97},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832037,"status":"passed","title":"should add a post published notification job"},{"ancestorTitles":["NotificationQueue","addPostRejectedNotification"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue addPostRejectedNotification should add a post rejected notification job","invocations":1,"location":{"column":5,"line":122},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832049,"status":"passed","title":"should add a post rejected notification job"},{"ancestorTitles":["NotificationQueue","addPostNeedsReviewNotification"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue addPostNeedsReviewNotification should add a post needs review notification job","invocations":1,"location":{"column":5,"line":147},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832052,"status":"passed","title":"should add a post needs review notification job"},{"ancestorTitles":["NotificationQueue","getJobCounts"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue getJobCounts should return job counts","invocations":1,"location":{"column":5,"line":172},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832058,"status":"passed","title":"should return job counts"},{"ancestorTitles":["NotificationQueue","getFailedJobs"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue getFailedJobs should return failed jobs","invocations":1,"location":{"column":5,"line":189},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832062,"status":"passed","title":"should return failed jobs"},{"ancestorTitles":["NotificationQueue","retryFailedJob"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue retryFailedJob should retry a failed job successfully","invocations":1,"location":{"column":5,"line":204},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366832065,"status":"passed","title":"should retry a failed job successfully"},{"ancestorTitles":["NotificationQueue","retryFailedJob"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"NotificationQueue retryFailedJob should throw error when job not found","invocations":1,"location":{"column":5,"line":218},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832068,"status":"passed","title":"should throw error when job not found"}],"endTime":1751366832077,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/queues/notification.queue.spec.ts","startTime":1751366831676,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["JwtStrategy","validate"],"duration":24,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JwtStrategy validate should return user data when payload is valid","invocations":1,"location":{"column":5,"line":35},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832357,"status":"passed","title":"should return user data when payload is valid"},{"ancestorTitles":["JwtStrategy","validate"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JwtStrategy validate should throw UnauthorizedException when payload is missing sub","invocations":1,"location":{"column":5,"line":53},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832389,"status":"passed","title":"should throw UnauthorizedException when payload is missing sub"},{"ancestorTitles":["JwtStrategy","validate"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JwtStrategy validate should throw UnauthorizedException when payload is missing email","invocations":1,"location":{"column":5,"line":66},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832397,"status":"passed","title":"should throw UnauthorizedException when payload is missing email"}],"endTime":1751366832403,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/strategies/jwt.strategy.spec.ts","startTime":1751366832083,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["RequireRole Decorator"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RequireRole Decorator should call Roles decorator with single role","invocations":1,"location":{"column":3,"line":14},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832625,"status":"passed","title":"should call Roles decorator with single role"},{"ancestorTitles":["RequireRole Decorator"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RequireRole Decorator should work with different role types","invocations":1,"location":{"column":3,"line":25},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366832642,"status":"passed","title":"should work with different role types"},{"ancestorTitles":["RequireRole Decorator"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RequireRole Decorator should handle empty string role","invocations":1,"location":{"column":3,"line":34},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832645,"status":"passed","title":"should handle empty string role"}],"endTime":1751366832650,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/decorators/require-role.decorator.spec.ts","startTime":1751366832416,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Roles Decorator"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Roles Decorator should set metadata with ROLES_KEY","invocations":1,"location":{"column":3,"line":5},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366832832,"status":"passed","title":"should set metadata with ROLES_KEY"},{"ancestorTitles":["Roles Decorator"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Roles Decorator should work with single role","invocations":1,"location":{"column":3,"line":13},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832842,"status":"passed","title":"should work with single role"},{"ancestorTitles":["Roles Decorator"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Roles Decorator should work with multiple roles","invocations":1,"location":{"column":3,"line":20},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832843,"status":"passed","title":"should work with multiple roles"},{"ancestorTitles":["Roles Decorator"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Roles Decorator should work with empty roles array","invocations":1,"location":{"column":3,"line":27},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832844,"status":"passed","title":"should work with empty roles array"},{"ancestorTitles":["Roles Decorator"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Roles Decorator should export ROLES_KEY constant","invocations":1,"location":{"column":3,"line":33},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366832845,"status":"passed","title":"should export ROLES_KEY constant"}],"endTime":1751366832848,"message":"","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/decorators/roles.decorator.spec.ts","startTime":1751366832658,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return true for owner with any action","invocations":1,"location":{"column":5,"line":148},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833683,"status":"passed","title":"should return true for owner with any action"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return false for inactive organization","invocations":1,"location":{"column":5,"line":161},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833721,"status":"passed","title":"should return false for inactive organization"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return false for inactive user","invocations":1,"location":{"column":5,"line":174},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833726,"status":"passed","title":"should return false for inactive user"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return false for inactive membership","invocations":1,"location":{"column":5,"line":190},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833731,"status":"passed","title":"should return false for inactive membership"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should allow inactive membership when requireActiveMembership is false","invocations":1,"location":{"column":5,"line":207},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833736,"status":"passed","title":"should allow inactive membership when requireActiveMembership is false"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return false for missing userId","invocations":1,"location":{"column":5,"line":222},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833741,"status":"passed","title":"should return false for missing userId"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return false for writer trying to delete","invocations":1,"location":{"column":5,"line":233},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833745,"status":"passed","title":"should return false for writer trying to delete"},{"ancestorTitles":["AdvancedAuthService","hasPermission"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService hasPermission should return true for editor managing users","invocations":1,"location":{"column":5,"line":247},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833749,"status":"passed","title":"should return true for editor managing users"},{"ancestorTitles":["AdvancedAuthService","checkComplexPermissions"],"duration":6,"failing":false,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/services/advanced-auth.service.spec.ts:283:40)"],"fullName":"AdvancedAuthService checkComplexPermissions should return true for all valid permissions","invocations":1,"location":{"column":5,"line":262},"numPassingAsserts":0,"retryReasons":[],"startAt":1751366833758,"status":"failed","title":"should return true for all valid permissions"},{"ancestorTitles":["AdvancedAuthService","checkComplexPermissions"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService checkComplexPermissions should return false when user is inactive","invocations":1,"location":{"column":5,"line":288},"numPassingAsserts":3,"retryReasons":[],"startAt":1751366833766,"status":"passed","title":"should return false when user is inactive"},{"ancestorTitles":["AdvancedAuthService","checkComplexPermissions"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService checkComplexPermissions should return partial success when requireAll is false","invocations":1,"location":{"column":5,"line":314},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833770,"status":"passed","title":"should return partial success when requireAll is false"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should return true for owner managing editor","invocations":1,"location":{"column":5,"line":346},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833775,"status":"passed","title":"should return true for owner managing editor"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should return false for editor managing owner","invocations":1,"location":{"column":5,"line":358},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833778,"status":"passed","title":"should return false for editor managing owner"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should return true for owner managing self","invocations":1,"location":{"column":5,"line":370},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833782,"status":"passed","title":"should return true for owner managing self"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should return false for editor managing self","invocations":1,"location":{"column":5,"line":377},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833785,"status":"passed","title":"should return false for editor managing self"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should return false for inactive target user","invocations":1,"location":{"column":5,"line":384},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833789,"status":"passed","title":"should return false for inactive target user"},{"ancestorTitles":["AdvancedAuthService","canManageUser"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService canManageUser should throw BadRequestException for missing parameters","invocations":1,"location":{"column":5,"line":395},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833791,"status":"passed","title":"should throw BadRequestException for missing parameters"},{"ancestorTitles":["AdvancedAuthService","Edge Cases and Error Handling"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":"User not found","expected":"Organization not found","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"\u001b[7mOrganization\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"\u001b[7mOrganization\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/services/advanced-auth.service.spec.ts:412:29)"],"fullName":"AdvancedAuthService Edge Cases and Error Handling should handle null organization gracefully","invocations":1,"location":{"column":5,"line":401},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833801,"status":"failed","title":"should handle null organization gracefully"},{"ancestorTitles":["AdvancedAuthService","Edge Cases and Error Handling"],"duration":3,"failing":false,"failureDetails":[{"matcherResult":{"actual":"User not found","expected":"Membership not found","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"\u001b[7mMembership\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"\u001b[7mMembership\u001b[27m not found\"\u001b[39m\nReceived: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m\n    at Object.<anonymous> (/home/vikky/worky/Enbros/tat2/backend/src/auth/services/advanced-auth.service.spec.ts:427:29)"],"fullName":"AdvancedAuthService Edge Cases and Error Handling should handle null membership gracefully","invocations":1,"location":{"column":5,"line":415},"numPassingAsserts":1,"retryReasons":[],"startAt":1751366833807,"status":"failed","title":"should handle null membership gracefully"},{"ancestorTitles":["AdvancedAuthService","Edge Cases and Error Handling"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AdvancedAuthService Edge Cases and Error Handling should handle null user gracefully","invocations":1,"location":{"column":5,"line":430},"numPassingAsserts":2,"retryReasons":[],"startAt":1751366833810,"status":"passed","title":"should handle null user gracefully"}],"endTime":1751366833858,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAdvancedAuthService › checkComplexPermissions › should return true for all valid permissions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 281 |\u001b[39m       }))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 282 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mcheckComplexPermissions(check)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 283 |\u001b[39m       expect(result\u001b[33m.\u001b[39mhasAllPermissions)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 284 |\u001b[39m       expect(result\u001b[33m.\u001b[39mfailedPermissions)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m       expect(result\u001b[33m.\u001b[39mvalidationResult\u001b[33m.\u001b[39misValid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 286 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/services/advanced-auth.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:283:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAdvancedAuthService › Edge Cases and Error Handling › should handle null organization gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"\u001b[7mOrganization\u001b[27m not found\"\u001b[39m\n    Received: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 410 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mhasPermission(context)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 411 |\u001b[39m       expect(result\u001b[33m.\u001b[39mallowed)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 412 |\u001b[39m       expect(result\u001b[33m.\u001b[39mreason)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Organization not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 413 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 414 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 415 |\u001b[39m     it(\u001b[32m'should handle null membership gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/services/advanced-auth.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:412:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAdvancedAuthService › Edge Cases and Error Handling › should handle null membership gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"\u001b[7mMembership\u001b[27m not found\"\u001b[39m\n    Received: \u001b[31m\"\u001b[7mUser\u001b[27m not found\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 425 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mhasPermission(context)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 426 |\u001b[39m       expect(result\u001b[33m.\u001b[39mallowed)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 427 |\u001b[39m       expect(result\u001b[33m.\u001b[39mreason)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Membership not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 428 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 429 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 430 |\u001b[39m     it(\u001b[32m'should handle null user gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mauth/services/advanced-auth.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:427:29)\u001b[22m\u001b[2m\u001b[22m\n","name":"/home/vikky/worky/Enbros/tat2/backend/src/auth/services/advanced-auth.service.spec.ts","startTime":1751366832857,"status":"failed","summary":""}],"wasInterrupted":false}
